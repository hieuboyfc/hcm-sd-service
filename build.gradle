buildscript {
    repositories {
        mavenCentral()
        maven {
            url "http://oss.xdp.vn/repository/maven-releases/"
            allowInsecureProtocol = true
            credentials {
                username 'ndu6'
                password 'Nzp5ekwXTScGdVKThTNgL44DnUJnUNez'
            }
        }
        maven {
            url "https://plugins.gradle.org/m2/"
        }


    }
    dependencies {
        classpath "org.springframework.boot:spring-boot-gradle-plugin:${springBootVersion}"
        classpath "io.spring.gradle:dependency-management-plugin:${springDependenciesManagementVersion}"
        classpath "gradle.plugin.com.avast.gradle:gradle-docker-compose-plugin:${dockerComposePluginVersion}"

    }
}

subprojects {
    apply plugin: "io.spring.dependency-management"
    apply plugin: "java-library"
    apply plugin: 'idea'
    apply plugin: 'maven-publish'

    sourceCompatibility = '11'
    targetCompatibility = '11'

    group = group
    version = version

    idea {
        module {
            downloadJavadoc = true
            downloadSources = true
        }
    }

    dependencyManagement {
        imports { mavenBom "org.springframework.boot:spring-boot-dependencies:${springBootVersion}" }
        imports { mavenBom "org.springframework.cloud:spring-cloud-dependencies:${springCloudVersion}" }
        imports { mavenBom "org.keycloak.bom:keycloak-adapter-bom:${keycloakVersion}" }

        dependencies {
            dependency "io.springfox:springfox-boot-starter:${springfoxVersion}"
            dependency "io.springfox:springfox-swagger-ui:${springfoxVersion}"

            dependency "com.xdp:person-share:${personShareVersion}"
            dependency "com.xdp:ns-permission:${permissionVersion}"
            dependency "com.xdp:config-share:${configShareVersion}"
            dependency "com.xdp:user-share:${userShareVersion}"
            dependency "com.xdp:ns-cache:${cacheVersion}"
            dependency "com.xdp:ns-utils:${utilsVersion}"
            dependency "com.xdp:ns-lib:${libVersion}"
            dependency "com.xdp:task-core:${taskCoreVersion}"
            dependency "com.xdp:ns-kafka:${kafkaVersion}"
            dependency "com.xdp:ns-cache:${cacheVersion}"
            dependency "com.xdp.erp:gl-share:${erpGlShareVersion}"
            dependency "com.esotericsoftware:kryo:${kryoVersion}"

            dependency "commons-lang:commons-lang:${commonsLangVersion}"
            dependency "commons-validator:commons-validator:${commonsValidatorVersion}"
            dependency "com.google.guava:guava:${guavaVersion}"

            dependency "org.camunda.bpm:camunda-engine:${camundaEngineVersion}"
            dependency "com.vladmihalcea:hibernate-types-52:${vladmihalceaVersion}"
            dependency "org.awaitility:awaitility:${awaitilityVersion}"
            dependency "io.vertx:vertx-core:${vertxVersion}"
            dependency "org.hibernate:hibernate-envers:${hibernateEnvers}"

            dependency "javax.mail:javax.mail-api:${mailApiVersion}"
            dependency "com.sun.mail:javax.mail:${mailVersion}"
        }
    }

    dependencies {
        compileOnly 'org.projectlombok:lombok'
        annotationProcessor 'org.projectlombok:lombok'
    }

    configurations {
        compileOnly {
            extendsFrom annotationProcessor
        }
        compile.exclude module: 'spring-boot-starter-tomcat'
        compile.exclude group: 'org.apache.tomcat'
    }

    repositories {

        mavenCentral()

        jcenter()
        maven {
            url "http://oss.xdp.vn/repository/maven-releases/"
            allowInsecureProtocol = true
            credentials {
                username 'ndu6'
                password 'Nzp5ekwXTScGdVKThTNgL44DnUJnUNez'
            }
        }

    }
}
